// SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
/*
 * Device Tree Source for the R-Car V4M Gray Hawk Ethernet sub-board
 *
 * Copyright (C) 2023 Renesas Electronics Corp.
 */

&i2c0 {
	eeprom@53 {
		compatible = "rohm,br24g01", "atmel,24c01";
		label = "ethernet-sub-board-id";
		reg = <0x53>;
		pagesize = <8>;
	};
};

&pfc {
	avb1_pins: avb1 {
		mux {
			groups = "avb1_link", "avb1_mdio", "avb1_rgmii",
				"avb1_txcrefclk";
			function = "avb1";
		};

		pins_mdio {
			groups = "avb1_mdio";
			drive-strength = <24>;
		};

		pins_mii_tx {
			pins = "GP_6_7", "GP_6_6",
				"GP_6_13", "GP_6_12",
				"GP_6_16", "GP_6_18";
			drive-strength = <24>;
		};

		pin_tx_ctl {
			pins = "GP_6_7";
			bias-pull-up;
		};

		pins_puen_disable {
			pins = "GP_6_0", "GP_6_1", "GP_6_2", "GP_6_3", "GP_6_4",
				"GP_6_5", "GP_6_6", "GP_6_8", "GP_6_9", "GP_6_10",
				"GP_6_11", "GP_6_12", "GP_6_13", "GP_6_14", "GP_6_15",
				"GP_6_16", "GP_6_17", "GP_6_18", "GP_6_19", "GP_6_20";
			bias-disable;
		};
	};

	avb2_pins: avb2 {
		mux {
			groups = "avb2_link", "avb2_mdio", "avb2_rgmii",
				"avb2_txcrefclk";
			function = "avb2";
		};

		pins_mdio {
			groups = "avb2_mdio";
			drive-strength = <24>;
		};

		pin_tx_ctl {
			pins = "GP_5_19";
			bias-pull-up;
		};

		pins_puen_disable {
			pins = "GP_5_0", "GP_5_1", "GP_5_2", "GP_5_3", "GP_5_4",
				"GP_5_5", "GP_5_6", "GP_5_7", "GP_5_8", "GP_5_9", "GP_5_10",
				"GP_5_11", "GP_5_12", "GP_5_13", "GP_5_14", "GP_5_15",
				"GP_5_16", "GP_5_17", "GP_5_18", "GP_5_20";
			bias-disable;
		};
	};
};

&avb1 {
	pinctrl-0 = <&avb1_pins>;
	pinctrl-names = "default";
	phy-handle = <&phy1>;
	status = "okay";
	phy-reset-gpios = <&gpio6 1 GPIO_ACTIVE_LOW>;

	phy1: ethernet-phy@1 {
		compatible = "ethernet-phy-ieee802.3-c45";
		reg = <0>;
		interrupt-parent = <&gpio6>;
		interrupts = <3 IRQ_TYPE_LEVEL_LOW>;
		reset-gpios = <&gpio6 1 GPIO_ACTIVE_LOW>;
	};
};

&avb2 {
	pinctrl-0 = <&avb2_pins>;
	pinctrl-names = "default";
	phy-handle = <&phy2>;
	status = "okay";
	phy-reset-gpios = <&gpio5 5 GPIO_ACTIVE_LOW>;

	phy2: ethernet-phy@2 {
		compatible = "ethernet-phy-ieee802.3-c45";
		reg = <0>;
		interrupt-parent = <&gpio5>;
		interrupts = <4 IRQ_TYPE_LEVEL_LOW>;
		reset-gpios = <&gpio5 5 GPIO_ACTIVE_LOW>;
	};
};
